#  Copyright (c) 2021. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
#  Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
#  Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
#  Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
#  Vestibulum commodo. Ut rhoncus gravida arcu.

from Mapnode import *
from Hdmap import *
from automobile import *
from turtle import *
import turtle

# 初始化基准HDMap
GTHD = Hdmap(14, 11)

GTHD.set(1, 2, "restaurant")
GTHD.set(1, 3, "restaurant")
GTHD.set(1, 4, "restaurant")
GTHD.set(2, 2, "restaurant")
GTHD.set(2, 3, "restaurant")
GTHD.set(2, 4, "restaurant")
GTHD.set(3, 2, "restaurant")
GTHD.set(3, 3, "restaurant")
GTHD.set(3, 4, "restaurant")

GTHD.set(5, 3, "store")
GTHD.set(5, 4, "store")
GTHD.set(6, 3, "store")
GTHD.set(6, 4, "store")

for x in range(1, 7):
    for y in range(6, 10):
        GTHD.set(x, y, "hospital")

GTHD.set(8, 8, "tree")
GTHD.set(9, 8, "tree")
GTHD.set(12, 3, "tree")
GTHD.set(13, 3, "tree")
GTHD.set(12, 2, "tree")
GTHD.set(13, 2, "tree")

GTHD.set(12, 8, "AD")
GTHD.set(12, 7, "AD")
GTHD.set(12, 6, "AD")

car = automoile()
car.storedHdmap = GTHD;
car.GTX = 9
car.GTY = 6
car.lidar()

speed(1000)
up()
setx(-375)
sety(-300)
down()
fd(750)
lt(90)
fd(600)
lt(90)
fd(750)
lt(90)
fd(600)
color("black")
i = 0
while i < 7:
    lt(90)
    up()
    fd(50)
    down()
    lt(90)
    fd(600)
    rt(90)
    fd(50)
    down()
    rt(90)
    fd(600)
    i += 1

up()
lt(90)
fd(50)
lt(90)
fd(50)
lt(90)
down()

i = 0
while i < 6:
    down()
    fd(750)
    rt(90)
    up()
    fd(50)
    rt(90)
    down()
    fd(750)
    up()
    lt(90)
    fd(50)
    lt(90)
    i += 1

setx(-300)
sety(225)
lt(180)
fillcolor("black")
down()
begin_fill()
fd(300)
rt(90)
fd(200)
rt(90)
fd(300)
rt(90)
fd(200)
end_fill()
up()
lt(180)
fd(30)
color("white")
write(" hospital",False,'left',('arial',20,'normal'))

color("black")
sety(-25)
begin_fill()
fd(150)
lt(90)
fd(150)
lt(90)
fd(150)
lt(90)
fd(150)
lt(90)
end_fill()
fd(30)
color("white")
write(" restaurant",False,'left',('arial',20,'normal'))
bk(30)
color("black")
lt(90)
up()
fd(200)
down()
begin_fill()
fd(100)
rt(90)
fd(100)
rt(90)
fd(100)
rt(90)
fd(100)
rt(90)
end_fill()
rt(90)
fd(30)
color("white")
write(" store",False,'left',('arial',20,'normal'))

up()
color("black")
setx(75)
sety(150)
down()
begin_fill()
rt(90)
fd(10)
lt(90)
circle(10)
end_fill()
up()
lt(90)
fd(50)
rt(90)
begin_fill()
circle(10)
end_fill()

up()
setx(250)
sety(175)
begin_fill()
down()
fd(150)
lt(90)
fd(50)
lt(90)
fd(150)
lt(90)
fd(50)
end_fill()
lt(90)
fd(30)

color("white")
write(" AD",False,'left',('arial',20,'normal'))

color("black")
up()
setx(0)
sety(0)

left(90)
fd(265)
rt(90)
fd(100)
down()
begin_fill()
circle(10)
end_fill()
up()
fd(50)
down()
begin_fill()
circle(10)
end_fill()
up()
setx(315)
sety(-100)
down()
begin_fill()
circle(10)
end_fill()
up()
fd(50)
down()
begin_fill()
circle(10)
end_fill()
# 地图画完
speed(2)
up()
setx(50 * (car.GTX - 6.5) - 15)
sety(50 * (car.GTY - 5))
color("orange")
begin_fill()
circle(15)
end_fill()
up()
setx(50 * (car.GTX - 6.5))
sety(50 * (car.GTY - 5))
pensize(3)
lt(180)
down()
fd(abs(car.NNodeDist * 50))
rt(90)
up()
fd(abs(car.NNodeDist * 50))
down()
lt(90)
circle(abs(car.NNodeDist * 50))
up()
setx(50 * (car.GTX - 6.5))
sety(50 * (car.GTY - 5))
lt(90)
down()
fd(abs(car.WNodeDist * 50))
rt(90)
up()
fd(abs(car.WNodeDist * 50))
down()
lt(90)
circle(abs(car.WNodeDist * 50))
up()


setx(50 * (car.GTX - 6.5))
sety(50 * (car.GTY - 5))
lt(180)
down()
fd(abs(car.ENodeDist * 50))
lt(90)
up()
fd(abs(car.ENodeDist * 50))
down()
lt(90)
circle(abs(car.ENodeDist * 50))
up()

setx(50 * (car.GTX - 6.5) - 15)
sety(50 * (car.GTY - 5))
lt(90)
down()
color("red")
begin_fill()
circle(15)
end_fill()





turtle.done()